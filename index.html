<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Image Classifier</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #results {
            margin-top: 20px;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

    <h1>Food Image Classifier</h1>
    <input id="photo" type="file" accept="image/*">
    <div id="results"></div>
    
    <script>
        async function loaded(reader) {   
            const response = await fetch("https://sakibrumu-food-image-classification.hf.space/run/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ data: [reader.result] })
            });

            const json = await response.json();
            const pred_label = json['data'][0]['label'];
            const predictions = json['data'][0]['predictions'];

            // Display the result and the uploaded image
            results.innerHTML = `
                <br/> 
                <img src="${reader.result}" width="500">
                <p><strong>Prediction:</strong> ${pred_label}</p>
                <p><strong>Probabilities:</strong></p>
                <pre>${JSON.stringify(predictions, null, 2)}</pre>
            `;
        }

        function read() {
            const reader = new FileReader();
            reader.addEventListener('load', () => loaded(reader));
            reader.readAsDataURL(photo.files[0]);
        }

        photo.addEventListener('input', read);
    </script>

</body>
</html>
